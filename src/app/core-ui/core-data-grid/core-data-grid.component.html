<table class="table table-bordered table-striped table-hover core-data-grid">
    <thead>
        <tr>
            <th *ngFor="let column of columns">
                {{column.headerName}}
                <div class="pull-right">
                    <a href
                       class="data-grid-filter-icon"
                       (click)="showFilterEditor(filterPopup)"
                       *ngIf="column.filter"
                       [ngbPopover]="filterContent"
                       popoverTitle="Filter"
                       placement="bottom"
                       #filterPopup="ngbPopover"
                       triggers="manual">
                        <span class="fa fa-filter" [class.filtered]="isFiltered(column)"></span>
                        <template #filterContent>
                            <div *ngIf="column.filter === 'contains'" >
                                <div class="form-group">
                                    Contains: <input type="text" class="form-control" [(ngModel)]="getModel(column).value" />
                                </div>
                                <div class="pull-right btn-group" role="group">
                                    <button class="btn btn-primary"
                                            (click)="applyFilter(column, true, filterPopup)">Apply</button>
                                    <button class="btn btn-danger"
                                            (click)="applyFilter(column, false, filterPopup)">Clear</button>
                                    <button class="btn btn-secondary"
                                            (click)="closeFilterEditor(filterPopup)">Cancel</button>
                                </div>
                            </div>
                            <div *ngIf="column.filter === 'startsWith'" >
                                <div class="form-group">
                                    Starts With: <input type="text" class="form-control" [(ngModel)]="getModel(column).value" />
                                </div>
                                <div class="pull-right btn-group" role="group">
                                    <button class="btn btn-primary"
                                            (click)="applyFilter(column, true, filterPopup)">Apply</button>
                                    <button class="btn btn-danger"
                                            (click)="applyFilter(column, false, filterPopup)">Clear</button>
                                    <button class="btn btn-secondary"
                                            (click)="closeFilterEditor(filterPopup)">Cancel</button>
                                </div>
                            </div>
                            <div *ngIf="column.filter === 'endsWith'" >
                                <div class="form-group">
                                    Ends With: <input type="text" class="form-control" [(ngModel)]="getModel(column).value" />
                                </div>
                                <div class="pull-right btn-group" role="group">
                                    <button class="btn btn-primary"
                                            (click)="applyFilter(column, true, filterPopup)">Apply</button>
                                    <button class="btn btn-danger"
                                            (click)="applyFilter(column, false, filterPopup)">Clear</button>
                                    <button class="btn btn-secondary"
                                            (click)="closeFilterEditor(filterPopup)">Cancel</button>
                                </div>
                            </div>
                            <div *ngIf="column.filter === 'numberRange'" >
                                <div class="form-group">
                                    Start: <input type="number" step="any" class="form-control" [(ngModel)]="getModel(column).start" />
                                    End: <input type="number" step="any" class="form-control" [(ngModel)]="getModel(column).end" />
                                </div>
                                <div class="pull-right btn-group" role="group">
                                    <button class="btn btn-primary"
                                            (click)="applyFilter(column, true, filterPopup)">Apply</button>
                                    <button class="btn btn-danger"
                                            (click)="applyFilter(column, false, filterPopup)">Clear</button>
                                    <button class="btn btn-secondary"
                                            (click)="closeFilterEditor(filterPopup)">Cancel</button>
                                </div>
                            </div>
                            <div *ngIf="column.filter === 'dateRange'" >
                                <div class="form-group">
                                    Start: <core-date-picker [(date)]="getModel(column).start"></core-date-picker>
                                    End: <core-date-picker [(date)]="getModel(column).end"></core-date-picker>
                                </div>
                                <div class="pull-right btn-group" role="group">
                                    <button class="btn btn-primary"
                                            (click)="applyFilter(column, true, filterPopup)">Apply</button>
                                    <button class="btn btn-danger"
                                            (click)="applyFilter(column, false, filterPopup)">Clear</button>
                                    <button class="btn btn-secondary"
                                            (click)="closeFilterEditor(filterPopup)">Cancel</button>
                                </div>
                            </div>
                            <div *ngIf="column.filter === 'boolean'" >
                                <div class="form-group">
                                    Value:
                                    <select class="form-control" [(ngModel)]="getModel(column).value">
                                        <option [ngValue]="null">None</option>
                                        <option [ngValue]="true">True</option>
                                        <option [ngValue]="false">False</option>
                                    </select>
                                </div>
                                <div class="pull-right btn-group" role="group">
                                    <button class="btn btn-primary"
                                            (click)="applyFilter(column, true, filterPopup)">Apply</button>
                                    <button class="btn btn-danger"
                                            (click)="applyFilter(column, false, filterPopup)">Clear</button>
                                    <button class="btn btn-secondary"
                                            (click)="closeFilterEditor(filterPopup)">Cancel</button>
                                </div>
                            </div>
                        </template>
                    </a>
                    <a href class="data-grid-sort-icon" (click)="sortBy(column)" *ngIf="column.isSortable">
                        <span class="fa"
                              [class.fa-sort]="column.bind !== sortField"
                              [class.fa-sort-asc]="column.bind === sortField && !isSortDescending"
                              [class.fa-sort-desc]="column.bind === sortField && isSortDescending"></span>
                    </a>
                </div>
            </th>
        </tr>
    </thead>
    <tbody>
        <tr scope="row" *ngFor="let row of filteredData | orderBy: sortField : isSortDescending | pageBy: pageSize : page">
            <td *ngFor="let column of columns">
                {{ getValue(row, column) }}
            </td>
        </tr>
    </tbody>
</table>
<div class="row">
    <div class="col">
        <ngb-pagination *ngIf="data && pageSize !== null"
                        [ellipses]="true"
                        [maxSize]="10"
                        [boundaryLinks]="true"
                        [directionLinks]="true"
                        [collectionSize]="filteredData.length"
                        [(page)]="page"
                        [pageSize]="pageSize"></ngb-pagination>
    </div>
    <div class="col-2">
        Page Size:
        <select [(ngModel)]="pageSize">
            <option *ngFor="let pageSizeOption of pageSizes" [ngValue]="pageSizeOption">
                {{pageSizeOption}}
            </option>
        </select>
    </div>
    <div class="col">
        <div class="pull-right">
            Total: <span class="badge badge-pill badge-default">{{filteredData.length}}</span>
        </div>
    </div>
</div>
